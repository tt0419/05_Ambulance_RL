data:
  area_restriction:
    area_name: 第三方面
    districts:
    - 目黒区
    - 渋谷区
    - 世田谷区
    enabled: true
    section_code: 3
  episode_duration_hours: 8
  eval_periods:
  - end_date: '20230409'
    start_date: '20230408'
  train_periods:
  - end_date: '20230407'
    start_date: '20230401'
evaluation:
  compare_baselines:
  - closest
  - severity_based
  eval_deterministic: false
  interval: 25
  metrics:
  - critical_6min_rate
  - achieved_13min_rate
  - mean_response_time
  - area3_specific_rate
  n_eval_episodes: 10
experiment:
  description: 第三方面限定による段階的学習
  device: cpu
  name: ppo_area3_focused_v1
  seed: 42
metadata:
  description: '第三方面（目黒・渋谷・世田谷）に限定した実験

    - 事案数を約1/10に削減

    - 救急隊数を約15-20隊に限定

    - 学習の収束を優先

    '
  notes: '- まず第三方面で成功モデルを作る

    - 成功後、段階的に他方面へ拡張

    - 8時間エピソードで学習機会を増やす'
network:
  actor:
    activation: relu
    dropout: 0.05
    hidden_layers:
    - 128
    - 64
  critic:
    activation: relu
    dropout: 0.05
    hidden_layers:
    - 128
    - 64
  state_encoder:
    ambulance_features: 4
    incident_features: 10
    spatial_features: 20
    temporal_features: 8
ppo:
  batch_size: 64
  clip_epsilon: 0.2
  entropy_coef: 0.08
  gae_lambda: 0.95
  gamma: 0.99
  learning_rate:
    actor: 0.0003
    critic: 0.0005
    scheduler: cosine
  max_grad_norm: 0.5
  n_episodes: 3000
  n_epochs: 4
  target_kl: 0.02
  value_loss_coeff: 0.5
reward:
  base_reward: 10.0
  continuous_params:
    critical:
      max_bonus: 150
      penalty_scale: 5.0
      target: 6
    mild:
      max_bonus: 5
      penalty_scale: 0.2
      target: 13
    moderate:
      max_bonus: 30
      penalty_scale: 1.0
      target: 13
  penalties:
    over_13min: -10.0
    over_6min: -5.0
    per_minute_over: -0.5
  use_continuous: true
  weights:
    coverage_preservation: 0.3
    response_time: -0.5
    severity_bonus: 5.0
    threshold_penalty: -5.0
severity:
  categories:
    critical:
      conditions:
      - 重篤
      - 重症
      - 死亡
      reward_weight: 10.0
      time_limit_seconds: 360
    mild:
      conditions:
      - 軽症
      reward_weight: 0.5
      time_limit_seconds: 780
    moderate:
      conditions:
      - 中等症
      reward_weight: 2.0
      time_limit_seconds: 780
  thresholds:
    golden_time: 360
    standard_time: 780
teacher:
  adaptive_recovery:
    check_interval: 50
    enabled: true
    min_performance: 0.2
  decay_episodes: 1000
  enabled: true
  final_prob: 0.3
  initial_prob: 0.8
training:
  checkpoint_interval: 50
  early_stopping:
    enabled: true
    min_delta: 0.005
    min_episodes: 500
    patience: 300
  keep_last_n: 10
  logging:
    area3_specific_logs:
    - district_breakdown
    - ambulance_utilization
    interval: 10
    log_level: INFO
    tensorboard: true
    wandb: true
